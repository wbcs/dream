# å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶
+ ä»–ä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
+ Reactæ˜¯å¦‚ä½•åŒºåˆ†ä»–ä»¬çš„ï¼Ÿ

# åŒºåˆ«
## jsxå†™æ³•
```js
// ä½¿ç”¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œæ˜¯Function Componentè¿˜æ˜¯Class Componentä¸é‡è¦
<Greeting />
```
## Reactå†…éƒ¨è°ƒç”¨
å¦‚æœ `Greeting` æ˜¯ `Funtion Component`ï¼Œåˆ™ `React` ä¼šè°ƒç”¨å®ƒï¼š
```js
function Greeting() {
  return <p>Hello World!</p>;
}

const result = Greetring(props);
```

å¦‚æœæ˜¯ `Class Component`ï¼Œ åˆ™ `React` ä¼šå…ˆåˆ›å»ºå®ƒçš„å®ä¾‹ï¼Œç„¶åè°ƒç”¨ `render` æ–¹æ³•ï¼š
```js
class Greeting extends Component {
  render() {
    return <p>Hello World</p>;
  }
}

const ins = new Greetring(props);
const result = ins.render();
```
## â˜ï¸å¾ˆé‡è¦çš„ğŸŒ°
```js
function Profile(props) {
  const handleClick = () => {
    setTimeout(() => {
      alert(props.username);
    }, 3000);
  };

  return <button onClick={handleClick}>click me</button>
}

class Profile extends Component {
  handleClick = () => {
    setTimeout(() => {
      alert(this.props.username);
    }, 3000);
  }
  render() {
    return <button onClick={this.handleClick}>click me</button>
  }
}
```
ä»¥ä¸Šä»£ç ä¹ä¸€çœ‹é€»è¾‘ä¸Šå¥½åƒæ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚ä½†æ˜¯ï¼š
```js
class App extends Component {
  state = {
    username: 'Bruce'
  };
  handleClick = () => {
    this.setState({
      username: 'BATMAN'
    });
  }
  render() {
    const {username} = this.state;

    return <div onClick={this.handleClick}>
      <Profile username={username} />
    </div>;
  }
}
```
å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ä½†æ˜¯å½“ `Profile` æ˜¯ `Class Component` çš„æ—¶å€™ï¼Œ`alert` å‡ºæ¥çš„æ˜¯ `'BATMAN'` , è€Œ `Function Component` `alert` å‡ºæ¥çš„æ˜¯ `'Bruce'`.

### ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ

æ— è®ºæ˜¯ `class` è¿˜æ˜¯ `Function`ï¼Œ éƒ½æ˜¯ä» `props` é‡Œæå– `username`ã€‚ä½†æ˜¯å‡½æ•°ç»„ä»¶å°±æ˜¯ä¹‹å‰æ²¡æœ‰æ”¹å˜çš„å€¼ï¼Œè€Œç±»ç»„ä»¶æ˜¯æ›´æ–°åçš„å€¼ã€‚

åŸå› æ˜¯ï¼š`props`åœ¨å‡½æ•°ç»„ä»¶ä¸­æ˜¯æ°¸è¿œä¸ä¼šå˜çš„ã€‚å› ä¸ºå‡½æ•°ç»„ä»¶æ›´æ–°`React`éƒ½ä¼šé‡æ–°æ‰§è¡Œå‡½æ•°ï¼Œæ¯æ¬¡æ‰§è¡Œå‡½æ•°ï¼Œå‡½æ•°éƒ½ä¼šæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œ`props`æ˜¯å‚æ•°ï¼Œè‡ªç„¶å°±ä¸ä¼šå˜äº†ã€‚

è€Œç±»ç»„ä»¶åœ¨æ›´æ–°çš„æ—¶å€™ï¼Œä¼šæ›´æ–°å®ä¾‹çš„å±æ€§ã€‚å®ä¾‹ä¾ç„¶æ˜¯åŸå…ˆæ˜¯å®ä¾‹ï¼Œåªä¸è¿‡`props` çš„å€¼æ›´æ–°äº†è€Œå·²ã€‚

è¿™å°±é€ æˆåŒæ ·æ˜¯ä»`props`è¯»å–å±æ€§ï¼Œ`alert`çš„æ—¶å€™å‡½æ•°ç»„ä»¶çš„`props`è¿˜æ˜¯åŸæ¥çš„`props`ï¼Œè€Œç±»ç»„ä»¶çš„`props`å·²ç»æ›´æ–°äº†.
> è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå…¬å¸åœ¨æå–å±æ€§çš„æ—¶å€™éƒ½é€‰æ‹©è§£æ„èµ‹å€¼ï¼ˆ`const {username} = this.props;`ï¼‰ï¼Œè€Œä¸æ˜¯ç›´æ¥è¯»å–å±æ€§çš„åŸå› äº†ã€‚

### å¦‚æœå‡½æ•°ç»„ä»¶æƒ³è¦ç±»ä¼¼ç±»ç»„ä»¶çš„è¡Œä¸ºæ€ä¹ˆåŠï¼Ÿ
ç›´æ¥ä¸Šä»£ç ï¼š
```js
const [username, setUsername] = useState('Bruce');

const ref = useRef(username);
useEffect(() => {
  ref.current = username;
}, [username]);

const handleClick = () => setTimeout(
  () => alert(ref.current),
  2000
);
const updateUsername = () => setUsername('BATMAN');

// çœç•¥
```

# Reactå¦‚ä½•åŒºåˆ«ä»–ä»¬ï¼Ÿ
åœ¨å£°æ˜è¿™ä¸¤ç§ç»„ä»¶çš„æ—¶å€™ï¼Œ`Class Component` éœ€è¦ç»§æ‰¿ `Component`ï¼Œ `React` æ˜¯é€šè¿‡åœ¨ `Component.prototype` ä¸Šæ·»åŠ  `isReactComponent` æ¥åŒºåˆ†ä¸¤è€…çš„ï¼š
```js
Component.prototype.isReactComponent = {};

class ClassComp extends Component {
  // ...
}
function FuncComp() {
  // ...
}

ClassComp.prototype.isReactComponent; // {}
FuncComp.prototype.isReactComponent;  // undefined
```

# æ€»ç»“
æ€»ç»“ä¸€ä¸‹ `Class Component` å’Œ `Function Component` çš„åŒºåˆ«ï¼š
1. `React`å†…éƒ¨è°ƒç”¨ä¸åŒï¼šå‰è€…åˆ›å»º`instance`ç„¶å`instance.render()`ï¼›åè€…ç›´æ¥æ‰§è¡Œæœ¬èº«ã€‚
2. `props`å¯å˜æ€§ä¸åŒï¼šå‰è€…`props`ä¼šåŠ¨æ€æ›´æ–°ï¼ˆæ›´æ–°çš„æ—¶å€™ä¼šæ”¹å˜`instance`çš„å±æ€§ï¼‰ï¼›åè€…çš„`props`æ˜¯ä¸€å®šä¸ä¼šæ”¹å˜çš„ï¼ˆå› ä¸ºæ¯æ¬¡æ‰§è¡Œéƒ½ä¼šæœ‰ä¸åŒçš„ä½œç”¨åŸŸï¼Œè€Œå®ƒä»¬æ˜¯ç‹¬ç«‹çš„ï¼‰ã€‚

> ç”±äºhooksçš„å‡ºç°ï¼Œæœ‰æ— çŠ¶æ€å·²ç»ä¸æ˜¯å‡½æ•°ç»„ä»¶è·Ÿç±»ç»„ä»¶çš„åŒºåˆ«äº†ï¼
# å‚è€ƒ
